Linux自有服务
=
linux运行模式 
-
在linux使用ps -ef|grep init查看  
该进程存在一个对应的配置文件:inittab(系统运行级别配置文件，位置/etc/inittab)

linux共有7种运行级别  
* 0—表示关机级别(不要将默认的级别设置成这个级别)
* 1—单用户模式
* 2—多用户模式，不带NFS(Network File System)
* 3—多用户模式，完全的多用户模式
* 4—没有被使用的模式
* 5—X11，完整的图形化界面模式
* 6—表示重启级别(不要将默认的级别设置成这个级别)

相关的命令
* #init 0 关机
* #init 3 切换到终端界面
* #init 5 切换到图形界面
* #init 6 重启电脑

查看当前模式id   
`#runlevel`  
切换当前运行模式  
`#init id`  
查看当前启动模式  
`#systemctl get-default`  
修改开机启动模式  
`#systemctl get-default 命令启动的语句`  
例如:  
`systemctl set-default multi-user.target `

inittab文件
![](image/服务/inittab.jpg)


用户管理
-
* /etc/passwd 存储用户的关键信息  
* /etc/group 存储用户组的关键信息  
* /etc/shadow 存储用户的密码信息  

添加用户

    #useradd 选项 用户名
    选项：
	    -g：表示指定用户的用户主组，选项的值可以是用户组的id，也可以是组名
	    -G：表示指定用户的用户附加组，选项的值可以是用户组的id，也可以是组名
	    -u：uid，用户的id（用户的标识符），系统默认会从500之后按顺序分配uid，如果不想使用系统分配的，可以通过该选项自定义
	    -c comment：添加注释
验证是否成功：
* 验证/etc/passwd的最后一行，查看是否有zhangsan的信息；
* 验证是否存在家目录（在Centos下创建好用户之后随之产生一个同名家目录）

passwd文件
* 用户名:密码:用户ID:用户组ID:注释:家目录:解释器shell

1. 用户名：创建新用户名称，后期登录的时候需要输入；
2. 密码：此密码位置一般情况都是“x”，表示密码的占位；
3. 用户ID：用户的识别符；
4. 用户组ID：该用户所属的主组ID；
5. 注释：解释该用户是做什么用的；
6. 家目录：用户登录进入系统之后默认的位置；
7. 解释器shell：等待用户进入系统之后，用户输入指令之后，该解释器会收集用户输入的指令，传递给内核处理；
![](image/服务/passwd.jpg)


在不添加选项的时候，执行useradd之后会执行一系列的操作  
1. 创建同名的家目录；
2. 创建同名的用户组；


修改用户

    #usermod 选项 用户名
    Usermod：user modify，用户修改
    选项：
	    -g：表示指定用户的用户主组，选项的值可以是用户组的id，也可以是组名
	    -G：表示指定用户的用户附加组，选项的值可以是用户组的id，也可以是组名
	    -u：uid，用户的id（用户的标识符），系统默认会从500之后按顺序分配uid，如果不想使用系统分配的，可以通过该选项自定义
	    -l：修改用户名


设置密码

	#passwd 用户名

切换用户命令

	#su 用户名
**如果用户名不指定则表示切换到root用户**


删除用户

	#userdel 选项 用户名
	选项：
		-r：表示删除用户的同时，删除其家目录
**已经登录的用户删除的时候提示删除失败，但是没有登录的用户可以正常删除,可以kill对应用户的全部进程**

用户组管理
=
用户组的管理涉及用户组的添加、删除和修改。组的增加、删除和修改实际上就是对/etc/group文件的更新  

![](image/服务/group.jpg)



文件结构：  
**用户组名:密码:用户组ID:组内用户名**
* 密码：X表示占位符，虽然用户组可以设置密码，但是绝大部分的情况下不设置密码；
* 组内用户名：表示附加组是该组的用户名称；

用户组添加

	#groupadd 选项 用户组名
	选项：
		-g：类似用户添加里的“-u”，-g表示选择自己设置一个自定义的用户组ID数字，
![](image/服务/groupadd.jpg)


用户组编辑

	#groupmod 选项 用户组名
	选项：
		-g：类似用户修改里的“-u”，-g表示选择自己设置一个自定义的用户组ID数字
		-n：类似于用户修改“-l”，表示设置新的用户组的名称

![](image/服务/groupmod.jpg)

用户组删除

	#groupdel 用户组名
**当如果需要删除一个组，但是这个组是某个用户的主组时，则不允许删除；如果确实需要删除，则先从组内移出所有用户**


网络设置
=
网卡配置文件位置：/etc/sysconfig/network-scripts
![](image/服务/网络文件.jpg)

![](image/服务/ifcfg-eth0.jpg)
* ONBOOT：是否开机启动
* BOOTPROTO：ip地址分配方式，DHCP表示动态主机分配协议
* HWADDR：硬件地址，MAC地址

重启网卡  
#service network restart

临时单个网卡  
* 停止某个网卡：#ifdown 网卡名
* 开启某个网卡：#ifup 网卡名  
例如：需要停止-启动（重启）eth0网卡，则可以输入  
#ifdown eth0  
#ifup eth0
